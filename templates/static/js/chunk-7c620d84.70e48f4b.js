(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c620d84"],{"0337":function(t,e,i){"use strict";i("790c")},"4e46":function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container",attrs:{id:"SeleniumIdeEditTestPlan"}},[t.fileChange?i("div",{staticClass:"file_change"},[t._v("檔案有更動，請重新整理")]):t._e(),t.planChange?i("div",{staticClass:"plan_change"},[t._v("測試計畫有更動")]):t._e(),i("el-button",{staticStyle:{margin:"1vw"},attrs:{type:"primary",disabled:t.unChangeable},on:{click:t.rewriteAllScript}},[t._v("儲存")]),i("div",[i("div",[i("el-button",{attrs:{type:"primary",disabled:t.disableSelectAll("project")},on:{click:function(e){return t.selectAll("project")}}},[t._v(t._s("全選"))]),i("el-button",{attrs:{type:"primary",disabled:t.disableCancelSelectAll("project")},on:{click:function(e){return t.cancelSelectAll("project")}}},[t._v(t._s("全不選"))]),i("el-button",{attrs:{type:"primary",disabled:t.disableReverseSelect("project")},on:{click:function(e){return t.reverseSelect("project")}}},[t._v(t._s("反向選"))]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dragTable",staticClass:"selenium_ide_project",attrs:{data:t.allScript,"row-key":t.projectRowKey,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"File Name (Project Name)"},on:{click:function(e){return t.alert("GOGO")}},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[i("div",{staticClass:"td_layout",class:t.allScript.indexOf(l)===t.projectIdx?"selectTrTd":"",on:{click:function(e){return t.updateProjectIdx(l)}}},[i("el-checkbox",{model:{value:l.check,callback:function(e){t.$set(l,"check",e)},expression:"row.check"}},[t._v(t._s(l.fileName===l.projectName?l.fileName:l.fileName+" ("+l.projectName+")"))])],1)]}}])})],1)],1),i("div",[i("el-button",{attrs:{type:"primary",disabled:t.disableSelectAll("suite")},on:{click:function(e){return t.selectAll("suite")}}},[t._v(" "+t._s("全選")+" ")]),i("el-button",{attrs:{type:"primary",disabled:t.disableCancelSelectAll("suite")},on:{click:function(e){return t.cancelSelectAll("suite")}}},[t._v(" "+t._s("全不選")+" ")]),i("el-button",{attrs:{type:"primary",disabled:t.disableReverseSelect("suite")},on:{click:function(e){return t.reverseSelect("suite")}}},[t._v(" "+t._s("反向選")+" ")]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dragTable",staticClass:"selenium_ide_suites",attrs:{data:t.allScript.length&&t.allScript[t.projectIdx].suites.length?t.allScript[t.projectIdx].suites:[],"row-key":t.suiteRowKey,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:(t.allScript.length?t.allScript[t.projectIdx].projectName:"X")+"：Suite Name"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[i("div",{staticClass:"td_layout",class:t.allScript[t.projectIdx].suites.indexOf(l)===t.suiteIdx?"selectTrTd":"",on:{click:function(e){return t.updateSuiteIdx(l)}}},[i("el-checkbox",{attrs:{disabled:!t.allScript[t.projectIdx].check},model:{value:l.check,callback:function(e){t.$set(l,"check",e)},expression:"row.check"}},[t._v(t._s(l.suiteName))])],1)]}}])})],1)],1),i("div",[i("el-button",{attrs:{type:"primary",disabled:t.disableSelectAll("test")},on:{click:function(e){return t.selectAll("test")}}},[t._v(" "+t._s("全選")+" ")]),i("el-button",{attrs:{type:"primary",disabled:t.disableCancelSelectAll("test")},on:{click:function(e){return t.cancelSelectAll("test")}}},[t._v(" "+t._s("全不選")+" ")]),i("el-button",{attrs:{type:"primary",disabled:t.disableReverseSelect("test")},on:{click:function(e){return t.reverseSelect("test")}}},[t._v(" "+t._s("反向選")+" ")]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dragTable",staticClass:"selenium_ide_tests",attrs:{data:t.allScript.length&&t.allScript[t.projectIdx].suites.length&&t.allScript[t.projectIdx].suites[t.suiteIdx].tests.length?t.allScript[t.projectIdx].suites[t.suiteIdx].tests:[],"row-key":t.testRowKey,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:(t.allScript.length&&t.allScript[t.projectIdx].suites.length?t.allScript[t.projectIdx].suites[t.suiteIdx].suiteName:"X")+"：test Name"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[i("div",{staticClass:"td_layout",class:t.allScript[t.projectIdx].suites[t.suiteIdx].tests.indexOf(l)===t.testIdx?"selectTrTd":"",on:{click:function(e){return t.updateTestIdx(l)}}},[i("el-checkbox",{attrs:{disabled:!t.allScript[t.projectIdx].check||!t.allScript[t.projectIdx].suites[t.suiteIdx].check},model:{value:l.check,callback:function(e){t.$set(l,"check",e)},expression:"row.check"}},[t._v(t._s(l.testName))])],1)]}}])})],1)],1)])],1)},s=[],c=i("d198"),r=i("7580"),a=(i("99af"),i("a434"),i("a15b"),i("d81d"),i("ac1f"),i("5319"),i("ad9d"),i("498a"),i("d3b7"),i("159b"),i("4de4"),i("53fe")),n=i.n(a),o={name:"SeleniumIdeEditTestPlan",data:function(){return{fileChange:!1,planChange:!1,allScript:[],projectIdx:null,suiteIdx:null,testIdx:null,sortable:null,listLoading:!0,unChangeable:!0}},watch:{allScript:{handler:function(){!1===this.listLoading&&(this.unChangeable=!1)},deep:!0}},created:function(){this.getAllScript()},methods:{projectRowKey:function(t){return t.fileId+t.projectId},suiteRowKey:function(t){var e=this.allScript[this.projectIdx];return"".concat(e.fileId).concat(e.projectId).concat(t.suiteId)},testRowKey:function(t){var e=this.allScript[this.projectIdx],i=e.suites[this.suiteIdx];return"".concat(e.fileId).concat(e.projectId).concat(i?i.suiteId:"").concat(t?t.testId:"")},getAllScript:function(){var t=this;return Object(r["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.listLoading=!0,e.next=3,t.$request(t.$serverRoute.ALL_SCRIPT.route).then((function(e){t.allScript=e,t.projectIdx=0,t.suiteIdx=0,t.testIdx=0,t.connectSocket()}));case 3:t.listLoading=!1,t.$nextTick((function(){t.setSort()}));case 5:case"end":return e.stop()}}),e)})))()},connectSocket:function(){var t=this;this.$socket.on(this.$socketClientOn.SERVER_EMIT_SIDE_FILES_CHANGE.route,(function(){t.fileChange=!0})),this.$socket.on(this.$socketClientOn.SERVER_EMIT_TEST_PLAN_CHANGE.route,(function(e){e!==t.$socket.io.engine.id&&(t.planChange=!0)}))},setSort:function(){var t=this,e=document.querySelectorAll(".selenium_ide_project > .el-table__body-wrapper > table > tbody")[0];n.a.create(e,{ghostClass:"sortable-ghost",setData:function(t){t.setData("Text","")},onEnd:function(e){var i=t.allScript.splice(e.oldIndex,1)[0];t.sortUpdateIdx(e,"projectIdx"),t.allScript.splice(e.newIndex,0,i)}});var i=document.querySelectorAll(".selenium_ide_suites > .el-table__body-wrapper > table > tbody")[0];this.sortable=n.a.create(i,{ghostClass:"sortable-ghost",setData:function(t){t.setData("Text","")},onEnd:function(e){var i=t.allScript[t.projectIdx].suites.splice(e.oldIndex,1)[0];t.sortUpdateIdx(e,"suiteIdx"),t.allScript[t.projectIdx].suites.splice(e.newIndex,0,i)}});var l=document.querySelectorAll(".selenium_ide_tests > .el-table__body-wrapper > table > tbody")[0];this.sortable=n.a.create(l,{ghostClass:"sortable-ghost",setData:function(t){t.setData("Text","")},onEnd:function(e){var i=t.allScript[t.projectIdx].suites[t.suiteIdx].tests.splice(e.oldIndex,1)[0];t.sortUpdateIdx(e,"testIdx"),t.allScript[t.projectIdx].suites[t.suiteIdx].tests.splice(e.newIndex,0,i)}})},sortUpdateIdx:function(t,e){var i=t.oldIndex,l=t.newIndex,s=[Math.min(i,l),Math.max(i,l)],c=s[0],r=s[1];i===this[e]?this[e]=l:c<=this[e]&&this[e]<=r&&(this[e]+=c<this[e]&&i<this[e]?-1:1)},updateProjectIdx:function(t){this.projectIdx=this.allScript.indexOf(t),this.suiteIdx=0,this.testIdx=0},updateSuiteIdx:function(t){this.suiteIdx=this.allScript[this.projectIdx].suites.indexOf(t),this.testIdx=0},updateTestIdx:function(t){this.testIdx=this.allScript[this.projectIdx].suites[this.suiteIdx].tests.indexOf(t)},showSuiteTests:function(t){return t.tests.length?t.tests.map((function(t){return t.testName.trim().replaceAll(" ","_")})).join(", "):"Not Tests"},rewriteAllScript:function(){var t=this;this.$request(this.$serverRoute.REWRITE_ALL_SCRIPT.route,{all_script_json:this.allScript,sid:this.$socket.io.engine.id}).then((function(e){void 0!==e&&(t.unChangeable=!0,t.$message.info("已儲存"))}))},fetchLevelArray:function(t){switch(t){case"project":if(this.allScript.length)return this.allScript;break;case"suite":if(this.allScript.length&&this.allScript[this.projectIdx].suites.length)return this.allScript[this.projectIdx].suites;break;case"test":if(this.allScript.length&&this.allScript[this.projectIdx].suites.length&&this.allScript[this.projectIdx].suites[this.suiteIdx].tests.length)return this.allScript[this.projectIdx].suites[this.suiteIdx].tests;break}},selectAll:function(t){var e=this.fetchLevelArray(t);e&&e.forEach((function(t){t.check=!0}))},cancelSelectAll:function(t){var e=this.fetchLevelArray(t);e&&e.forEach((function(t){t.check=!1}))},reverseSelect:function(t){var e=this.fetchLevelArray(t);e&&e.forEach((function(t){t.check=!t.check}))},disableSelectAll:function(t){var e=this.fetchLevelArray(t);return!e||e.length===e.filter((function(t){return t.check})).length},disableCancelSelectAll:function(t){var e=this.fetchLevelArray(t);return!e||0===e.filter((function(t){return t.check})).length},disableReverseSelect:function(t){var e=this.fetchLevelArray(t);return!e}}},d=o,u=(i("0337"),i("2877")),p=Object(u["a"])(d,l,s,!1,null,null,null);e["default"]=p.exports},"790c":function(t,e,i){}}]);