(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0389f42f"],{"2c8c":function(e,t,n){},"7f6b":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container",attrs:{id:"SeleniumIdeUpdateSide"}},[n("div",{attrs:{id:"left"}},[n("h1",[e._v("最新檔案(限一個 .side)")]),n("input",{ref:e.leftSideUploadInput,class:e.leftSideUploadInput,attrs:{type:"file",accept:".side"},on:{change:function(t){return e.inputChange(!0)}}}),n("div",{staticClass:"drop",class:"left"===e.leftRight?"mouse-over":"",on:{drop:function(t){return t.preventDefault(),function(t){return e.handleDrop(t,!0)}(t)},dragover:function(t){return e.dragOver(t,!0)},dragleave:e.handleLeave,mouseover:function(){return e.handleOver(!0)},mouseleave:e.handleLeave,click:function(t){return e.handleSelect(!0)}}},[e.leftFile?[n("div",[n("ul",{staticStyle:{width:"fit-content","user-select":"none"}},[n("li",{staticClass:"el-upload-list__item is-success",staticStyle:{"list-style":"none"},on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"file"},[n("div",{staticClass:"file_name"},[n("a",{staticClass:"el-upload-list__item-name",staticStyle:{color:"#1890ff"}},[n("i",{staticClass:"el-icon-document"}),e._v(e._s(e.leftFile.file.name))]),e._m(0),n("i",{staticClass:"el-icon-close",on:{click:function(t){return t.stopPropagation(),e.rmUpload(e.leftFile,!0)}}})])])])])])]:[n("div",[n("i",{staticClass:"el-icon-upload"}),e._v(" Drop Side files here or click "),n("el-button",{attrs:{type:"primary"}},[e._v(" Select ")])],1)]],2),e.leftFile?[n("el-button",{attrs:{type:"primary",disabled:e.selectNames.length===e.leftFile.data.tests.length},on:{click:function(t){return t.stopPropagation(),e.selectAll(t)}}},[e._v(e._s("全選"))]),n("el-button",{attrs:{type:"primary",disabled:0===e.selectNames.length},on:{click:function(t){return t.stopPropagation(),e.cancelSelectAll(t)}}},[e._v(e._s("全不選"))]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.reverseSelect(t)}}},[e._v(e._s("反向選"))]),n("el-table",{ref:"dragTable",attrs:{data:e.leftFile.data.tests,"row-key":"name",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:e.leftFile.file.name+" ("+e.leftFile.data.name+")"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("div",{staticClass:"td_layout"},[n("div"),n("el-checkbox",{key:i.name,attrs:{checked:i.check},model:{value:i.check,callback:function(t){e.$set(i,"check",t)},expression:"row.check"}},[e._v(e._s(i.name))]),n("div")],1)]}}],null,!1,1577317803)})],1)]:e._e()],2),n("div",{attrs:{id:"right"}},[n("h1",[e._v("待修改檔案(可多檔案 .side)")]),n("input",{ref:e.rightSideUploadInput,class:e.rightSideUploadInput,attrs:{type:"file",accept:".side",multiple:""},on:{change:function(t){return e.inputChange()}}}),n("div",{staticClass:"drop",class:"right"===e.leftRight?"mouse-over":"",on:{drop:function(t){return t.preventDefault(),e.handleDrop(t)},dragover:e.dragOver,dragleave:e.handleLeave,mouseover:function(t){return e.handleOver()},mouseleave:e.handleLeave,click:function(t){return e.handleSelect()}}},[e.rightFiles.length?[n("el-button",{attrs:{type:"primary",disabled:e.rightFilesOpen.length===e.rightFiles.length},on:{click:function(t){return t.stopPropagation(),e.allOpenClose(!0)}}},[e._v(e._s("全展開"))]),n("el-button",{attrs:{type:"primary",disabled:0===e.rightFilesOpen.length},on:{click:function(t){return t.stopPropagation(),e.allOpenClose(!1)}}},[e._v(e._s("全閉合"))]),n("el-button",{attrs:{type:"primary",disabled:!e.selectNames.some((function(t){return e.rightFiles.some((function(e){return!e.changes.includes(t)}))}))},on:{click:function(t){return t.stopPropagation(),e.downloadFiles(t)}}},[e._v(e._s("下載全部"))]),n("div",[n("ul",{staticStyle:{width:"fit-content","user-select":"none"}},e._l(e.rightFiles,(function(t){return n("li",{key:""+t.file.name+e.changeDateTime,staticClass:"el-upload-list__item is-success triangle",class:e.rightFilesOpen.includes(t.file.name)?"":"inverse",staticStyle:{"list-style":"none"},on:{click:function(n){return n.stopPropagation(),e.openClose(t.file.name)}}},[n("el-button",{attrs:{type:"primary",disabled:!e.selectNames.some((function(e){return!t.changes.includes(e)}))},on:{click:function(n){return n.stopPropagation(),e.downloadFile(t.file.name,t)}}},[e._v("下載")]),n("div",{staticClass:"file"},[n("div",{staticClass:"file_name"},[n("a",{staticClass:"el-upload-list__item-name",staticStyle:{color:"#1890ff"}},[n("i",{staticClass:"el-icon-document"}),e._v(e._s(t.file.name))]),e._m(1,!0),n("i",{staticClass:"el-icon-close",on:{click:function(n){return n.stopPropagation(),e.rmUpload(t)}}})]),e.rightFilesOpen.includes(t.file.name)?n("div",{staticClass:"file_info"},[e._l(e.selectNames,(function(i){return[t.changes.includes(i)?e._e():[t.data.tests.some((function(e){return e.name===i}))?n("div",{key:i+"replaces",staticClass:"replaces"},[e._v(e._s("Replace："+i))]):n("div",{key:i+"inserts",staticClass:"inserts"},[e._v(e._s("Insert："+i))])]]})),e._l(t.data.tests,(function(i){return[!e.selectNames.includes(i.name)||t.changes.includes(i.name)?n("div",{key:i.name+"show"},[e._v(" "+e._s(i.name))]):e._e()]}))],2):e._e()])],1)})),0)])]:[n("div",[n("i",{staticClass:"el-icon-upload"}),e._v(" Drop Side files here or click "),n("el-button",{attrs:{type:"primary"}},[e._v(" Select ")])],1)]],2)])])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{staticClass:"el-icon-upload-success el-icon-circle-check"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{staticClass:"el-icon-upload-success el-icon-circle-check"})])}];n("a4d3"),n("b64b");function a(e,t){if(null==e)return{};var n,i,s={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(s[n]=e[n]);return s}function l(e,t){if(null==e)return{};var n,i,s=a(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var r=n("d198");function c(e,t){this.v=e,this.k=t}function o(e){return new c(e,0)}n("d3b7"),n("e01a"),n("b636");function u(e){var t,n;function i(t,n){try{var a=e[t](n),l=a.value,r=l instanceof c;Promise.resolve(r?l.v:l).then((function(n){if(r){var c="return"===t?"return":"next";if(!l.k||n.done)return i(c,n);n=e[c](n).value}s(a.done?"return":"normal",n)}),(function(e){i("throw",e)}))}catch(o){s("throw",o)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,s){return new Promise((function(a,l){var r={key:e,arg:s,resolve:a,reject:l,next:null};n?n=n.next=r:(t=n=r,i(e,s))}))},"function"!=typeof e["return"]&&(this["return"]=void 0)}function f(e){return function(){return new u(e.apply(this,arguments))}}u.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},u.prototype.next=function(e){return this._invoke("next",e)},u.prototype["throw"]=function(e){return this._invoke("throw",e)},u.prototype["return"]=function(e){return this._invoke("return",e)};n("159b"),n("b0c0"),n("caad"),n("2532"),n("e9c4"),n("c740"),n("a434"),n("d81d"),n("4e82"),n("a15b"),n("ac1f"),n("00b4");var d=n("c4e3"),h=n.n(d),p=["check"],v={name:"SeleniumIdeUpdateSide",data:function(){return{leftRight:"",leftFile:null,rightFiles:[],rightFilesOpen:[],changeDateTime:new Date,rightSideUploadInput:"right-side-upload-input",leftSideUploadInput:"left-side-upload-input",selectNames:[]}},watch:{leftFile:{handler:function(){this.fileChange()},deep:!0},rightFiles:{handler:function(){this.fileChange()},deep:!0}},methods:{fileChange:function(){if(null!==this.leftFile){var e=[];this.leftFile.data.tests.forEach((function(t){!0===t.check&&e.push(t.name)})),this.selectNames=e,this.changeDateTime=new Date}},newFetchFilePicker:function(e,t){return f(Object(r["a"])().mark((function n(){var i,s;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,e=e.toLowerCase(),!["side","zip"].includes(e)){n.next=22;break}return i={},i["application/".concat(e)]=[".".concat(e)],n.next=7,o(window.showSaveFilePicker({suggestedName:t,types:[{description:"".concat(e," File"),accept:i}]}));case 7:return s=n.sent,n.next=10,o(s.createWritable());case 10:return s=n.sent,n.t0=o,n.t1=s,n.next=15,!0;case 15:return n.t2=n.sent,n.t3={type:"application/".concat(e)},n.t4=n.t1.write.call(n.t1,n.t2,n.t3),n.next=20,(0,n.t0)(n.t4);case 20:return n.next=22,o(s.close());case 22:n.next=26;break;case 24:n.prev=24,n.t5=n["catch"](0);case 26:case"end":return n.stop()}}),n,null,[[0,24]])})))()},downloadFiles:function(){var e=this;if(this.selectNames.some((function(t){return e.rightFiles.some((function(e){return!e.changes.includes(t)}))}))){var t=this.newFetchFilePicker("zip","seleniumIDE_".concat(this.$nowDatetimeFormat(),".zip"));t.next().then((function(n){if(!n.done){var i=new h.a;e.rightFiles.forEach((function(t){e.selectNames.some((function(e){return!t.changes.includes(e)}))&&(e.insertReplace(t),i.file(t.file.name,JSON.stringify(t.data)))})),i.generateAsync({type:"blob"}).then((function(e){t.next(e)}))}}))}},downloadFile:function(e,t){var n=this;if(this.selectNames.some((function(e){return!t.changes.includes(e)}))){var i=this.newFetchFilePicker("side",e);i.next().then((function(e){e.done||(n.insertReplace(t),i.next(new Blob([JSON.stringify(t.data)],{type:"application/json"})))}))}},insertReplace:function(e){var t=[];this.leftFile.data.tests.forEach((function(n){if(!0===n.check){e.changes.push(n.name);n.check;var i=l(n,p);t.push(i)}})),t.forEach((function(t){var n=e.data.tests.findIndex((function(e){return e.name===t.name}));-1===n?e.data.tests.push(t):e.data.tests[n].commands=t.commands}))},rmUpload:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?this.leftFile&&this.leftFile===e&&(this.leftFile=null):this.rightFiles.splice(this.rightFiles.indexOf(e),1)},allOpenClose:function(e){this.rightFilesOpen=e?this.rightFiles.map((function(e){return e.file.name})):[]},openClose:function(e){this.rightFilesOpen.includes(e)?this.rightFilesOpen.splice(this.rightFilesOpen.indexOf(e),1):this.rightFilesOpen.push(e)},selectAll:function(){this.leftFile.data.tests.forEach((function(e){e.check=!0}))},cancelSelectAll:function(){this.leftFile.data.tests.forEach((function(e){e.check=!1}))},reverseSelect:function(){this.leftFile.data.tests.forEach((function(e){e.check=!e.check}))},fetchJson:function(e){var t=new FileReader,n=function(e){return new Promise((function(n,i){t.onload=function(e){n(e.target.result)},t.onerror=function(e){i(e)},t.readAsText(e)}))};return n(e)},handleFiles:function(e,t){var n=this;if(e.length){var i=[];if(t){var s=e[0];this.isSide(s)?this.fetchJson(s).then((function(e){var t=JSON.parse(e);t.tests.sort((function(e,t){return e.name>t.name?1:-1})),t.tests.forEach((function(e){e.check=!1})),n.leftFile={data:t,file:s}})):i.push(s.name)}else e.forEach((function(e){n.isSide(e)?n.fetchJson(e).then((function(t){var i=n.rightFiles.findIndex((function(t){return t.file.name===e.name})),s={data:JSON.parse(t),file:e,changes:[]};-1===i?n.rightFiles.push(s):n.rightFiles[i]=s})):i.push(e.name)}));i.length&&this.$message.error("This type not is .side (".concat(i.join(", "),")")),this.$refs[t?this.leftSideUploadInput:this.rightSideUploadInput].value=null}},handleDrop:function(e,t){e.stopPropagation(),e.preventDefault(),this.handleFiles(e.dataTransfer.files,t)},dragOver:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy",this.handleOver(t)},handleOver:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.leftRight=e?"left":"right"},handleLeave:function(){this.leftRight=""},handleSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs[e?this.leftSideUploadInput:this.rightSideUploadInput].click()},inputChange:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.handleFiles(e?this.$refs[this.leftSideUploadInput].files:this.$refs[this.rightSideUploadInput].files,e)},isSide:function(e){return/\.side$/.test(e.name)}}},g=v,m=(n("9651"),n("2877")),y=Object(m["a"])(g,i,s,!1,null,null,null);t["default"]=y.exports},9651:function(e,t,n){"use strict";n("2c8c")},e9c4:function(e,t,n){var i=n("23e7"),s=n("d066"),a=n("d039"),l=s("JSON","stringify"),r=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,o=/^[\uDC00-\uDFFF]$/,u=function(e,t,n){var i=n.charAt(t-1),s=n.charAt(t+1);return c.test(e)&&!o.test(s)||o.test(e)&&!c.test(i)?"\\u"+e.charCodeAt(0).toString(16):e},f=a((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&i({target:"JSON",stat:!0,forced:f},{stringify:function(e,t,n){var i=l.apply(null,arguments);return"string"==typeof i?i.replace(r,u):i}})}}]);